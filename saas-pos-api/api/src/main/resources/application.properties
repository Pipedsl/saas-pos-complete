spring.application.name=saas-pos-api
server.port=8081

# --- BASE DE DATOS (Configuración Híbrida Local/Railway) ---
# Railway entrega estas variables: PGHOST, PGPORT, PGDATABASE, PGUSER, PGPASSWORD
# Usamos esas. Si no existen (en tu PC), usa los valores después de los dos puntos (:).

spring.datasource.url=jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:saas_pos}
spring.datasource.username=${PGUSER:saas_admin}
spring.datasource.password=${PGPASSWORD:saas_password_secret}
spring.datasource.driver-class-name=org.postgresql.Driver

# --- JPA ---
spring.jpa.database=postgresql
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
# Importante para evitar errores de 'feature not supported' en algunas nubes
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# --- FLYWAY ---
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
# Reutilizamos las mismas variables de arriba
spring.flyway.url=jdbc:postgresql://${PGHOST:localhost}:${PGPORT:5432}/${PGDATABASE:saas_pos}
spring.flyway.user=${PGUSER:saas_admin}
spring.flyway.password=${PGPASSWORD:saas_password_secret}

# Configuracion JWT
# Clave para desarrollo (en prod usar variable de entorno)
jwt.secret=${JWT_SECRET:EstaEsUnaClaveSecretaSuperSeguraParaDesarrolloLocalDeSaaSPos2025}
jwt.expiration=86400000

spring.jackson.serialization.fail-on-empty-beans=false

app.cors.allowed-origins=${ALLOWED_ORIGIN:http://localhost:4200}

app.admin.default-password=${ADMIN_DEFAULT_PASSWORD:admin123}